# 開発・運用フロー

アパレルブランドサイト「shushurin」の開発・運用における標準的なワークフローを記載します。

## ブランチ戦略

| ブランチ | 用途 | 環境 |
|---------|------|------|
| `main` | 本番公開用 | 本番環境（カスタムドメイン） |
| `develop` | ステージング用 | ステージング環境（サブドメイン） |
| `feature/*` | 機能開発用 | ローカル開発環境 |

## 開発フロー

### 1. 新しい作業を始める

新しい機能や修正を始める際は、必ず最新の `develop` ブランチから作業ブランチを作成します。

```bash
# developブランチに移動
git checkout develop

# 最新の状態を取得
git pull origin develop

# 新しい機能ブランチを作成
git checkout -b feature/xxxx
```

**ブランチ命名規則:**
- `feature/xxxx` は作業内容に応じて具体的な名前を付ける
- 例：
  - `feature/header-update` - ヘッダーの更新
  - `feature/product-gallery` - 商品ギャラリー機能
  - `feature/contact-form` - お問い合わせフォーム
  - `feature/mobile-responsive` - モバイル対応

### 2. ローカルで開発

機能ブランチで React + Tailwind を使用してUIや機能を実装します。

```bash
# 開発サーバーを起動
npm start
```

**開発のポイント:**
- コンポーネントベースで機能を分割
- Tailwind CSSでスタイリング
- レスポンシブデザインを考慮
- 定期的に動作確認を実施

### 3. コミット & プッシュ

作業が完了したら、変更内容をコミットしてリモートリポジトリにプッシュします。

```bash
# 変更ファイルをステージング
git add .

# コミットメッセージを付けてコミット
git commit -m "具体的な変更内容を記載"

# リモートリポジトリにプッシュ
git push origin feature/xxxx
```

**コミットメッセージの例:**
- `ヘッダーデザインを修正`
- `商品ギャラリーコンポーネントを追加`
- `お問い合わせフォームのバリデーション機能を実装`
- `モバイル表示の調整を実施`

### 4. Pull Request で develop にマージ

GitHubでPull Requestを作成し、レビュー後に `develop` ブランチにマージします。

**Pull Request作成時のポイント:**
- 変更内容の概要を明記
- スクリーンショットがあれば添付
- レビュワーを指定（チーム開発の場合）

**自動デプロイ:**
- `develop` ブランチへのマージ後、Amplifyが自動的にビルド
- ステージング環境（サブドメイン）に変更が反映される
- 数分後にステージングサイトで確認可能

### 5. develop → main にマージ

ステージング環境で動作確認が完了したら、`develop` を `main` にマージして本番公開します。

```bash
# mainブランチに移動
git checkout main

# 最新の状態を取得
git pull origin main

# developブランチをマージ
git merge develop

# 本番環境にプッシュ
git push origin main
```

**本番デプロイ:**
- `main` ブランチへのマージ後、Amplifyが自動的にビルド
- 本番環境（カスタムドメイン）に変更が反映される
- 数分後に本番サイトで確認可能

## 環境別設定

### ローカル開発環境
- **URL**: `http://localhost:3000`
- **起動方法**: `npm start`
- **用途**: 機能開発・デバッグ

### ステージング環境
- **ブランチ**: `develop`
- **URL**: `[サブドメイン].amplifyapp.com`
- **用途**: 本番公開前の最終確認

### 本番環境
- **ブランチ**: `main`
- **URL**: `[カスタムドメイン]`
- **用途**: 一般公開サイト

## 注意事項

### ✅ 推奨される作業方法
- 必ず `develop` から機能ブランチを作成
- 定期的なコミット（小さな単位での作業記録）
- 意味のあるコミットメッセージ
- ステージング環境での十分な動作確認

### ⚠️ 避けるべき操作
- `main` ブランチに直接コミット
- 大きすぎる変更を一度にコミット
- 意味不明なコミットメッセージ
- ステージング確認なしでの本番デプロイ

### 🚨 緊急時の対応
- **ホットフィックス**: `main` から `hotfix/xxxx` ブランチを作成
- **即座に修正**: 最小限の変更で問題を解決
- **両ブランチに適用**: `main` と `develop` 両方に変更を反映

## 継続的な改善

このフローは開発チームの成長や要件変更に応じて定期的に見直しを行い、より効率的な開発体制を構築していきます。

---

**最終更新**: プロジェクト開始時
**管理者**: 開発チーム
**レビュー頻度**: 月次
